# MTK Dairy - Complete System Flow Documentation

> **Enterprise-Level Multi-Tenant Dairy Farm SaaS Platform**
> 
> Version: 1.0.0 | Last Updated: December 2024
> 
> Real-World Example: `kaash0542@gmail.com` â†’ `Green Valley Farm` â†’ `FARM-N669KHLF`

---

## Table of Contents

1. [Architecture Overview](#1-architecture-overview)
2. [Technology Stack](#2-technology-stack)
3. [Database Schema](#3-database-schema)
4. [User Roles & Permissions](#4-user-roles--permissions)
5. [Complete User Journey Flow](#5-complete-user-journey-flow)
6. [API Routes Reference](#6-api-routes-reference)
7. [Real-World Example Walkthrough](#7-real-world-example-walkthrough)
8. [Security & Best Practices](#8-security--best-practices)
9. [AI Agent Rules & Memory](#9-ai-agent-rules--memory)

---

## 1. Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MTK DAIRY ARCHITECTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Browser   â”‚â”€â”€â”€â”€â–¶â”‚   Next.js   â”‚â”€â”€â”€â”€â–¶â”‚   Clerk     â”‚                   â”‚
â”‚  â”‚   Client    â”‚     â”‚   15 App    â”‚     â”‚   Auth      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                             â”‚                                               â”‚
â”‚                             â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          API LAYER                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚  â”‚  â”‚ /api/    â”‚  â”‚ /api/    â”‚  â”‚ /api/    â”‚  â”‚ /api/    â”‚             â”‚  â”‚
â”‚  â”‚  â”‚ farm-    â”‚  â”‚ admin/   â”‚  â”‚ animals/ â”‚  â”‚ user/    â”‚             â”‚  â”‚
â”‚  â”‚  â”‚ apps     â”‚  â”‚          â”‚  â”‚ milk/    â”‚  â”‚ farms    â”‚             â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚                                               â”‚
â”‚                             â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        DATA LAYER                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚  â”‚   Supabase   â”‚  â”‚   Clerk      â”‚  â”‚  Cloudinary  â”‚                â”‚  â”‚
â”‚  â”‚  â”‚   PostgreSQL â”‚  â”‚   Orgs       â”‚  â”‚   Storage    â”‚                â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Multi-Tenancy Model

- **Clerk Organizations** = Farm Tenants
- **Organization ID** = Tenant ID in Supabase
- **User can belong to multiple organizations** (farms)

---

## 2. Technology Stack

| Layer | Technology | Purpose |
|-------|-----------|---------|
| **Frontend** | Next.js 15 (App Router) | React framework with SSR |
| **UI** | Tailwind CSS + shadcn/ui | Styling & components |
| **Auth** | Clerk | Authentication & Organizations |
| **Primary DB** | Supabase PostgreSQL | Relational data storage |
| **ORM** | Drizzle ORM | Type-safe database queries |
| **Storage** | Cloudinary | Images & payment slips |
| **State** | TanStack Query + Zustand | Client state management |
| **Email** | Resend | Transactional emails |
| **i18n** | next-intl | English + Urdu (RTL) |

---

## 3. Database Schema

### Core Tables

```sql
-- Tenants (Farms)
tenants
â”œâ”€â”€ id (PK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Clerk Organization ID (org_xxx)
â”œâ”€â”€ slug â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ URL-friendly name (green-valley)
â”œâ”€â”€ farm_name â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Display name (Green Valley Farm)
â”œâ”€â”€ animal_types â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ JSON array ['cow', 'buffalo']
â”œâ”€â”€ language â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'en' | 'ur'
â”œâ”€â”€ currency â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'PKR'
â””â”€â”€ timezone â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'Asia/Karachi'

-- Platform Users
platform_users
â”œâ”€â”€ id (PK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Clerk User ID (user_xxx)
â”œâ”€â”€ email â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ User email
â”œâ”€â”€ platform_role â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'super_admin' | 'admin' | 'user'
â””â”€â”€ is_active â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Account status

-- Farm Applications
farm_applications
â”œâ”€â”€ id (PK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Application ID
â”œâ”€â”€ applicant_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€ References platform_users
â”œâ”€â”€ farm_name â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Requested farm name
â”œâ”€â”€ status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'pending' | 'payment_uploaded' | 'approved' | 'rejected'
â”œâ”€â”€ requested_plan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'free' | 'professional' | 'farm' | 'enterprise'
â”œâ”€â”€ payment_slip_url â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Cloudinary URL
â”œâ”€â”€ assigned_farm_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Generated ID (FARM-N669KHLF)
â””â”€â”€ assigned_tenant_id â”€â”€â”€â”€â”€â”€â”€â”€ References tenants (after approval)

-- Tenant Members
tenant_members
â”œâ”€â”€ id (PK)
â”œâ”€â”€ tenant_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ References tenants
â”œâ”€â”€ user_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ References platform_users
â”œâ”€â”€ role â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'farm_owner' | 'farm_manager' | 'staff'
â””â”€â”€ status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'active' | 'inactive'

-- Subscriptions
subscriptions
â”œâ”€â”€ id (PK)
â”œâ”€â”€ tenant_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ References tenants
â”œâ”€â”€ plan â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Subscription plan
â”œâ”€â”€ status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 'active' | 'trial' | 'expired'
â””â”€â”€ renew_date â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Next payment date
```

---

## 4. User Roles & Permissions

### Platform Roles

| Role | Description | Access |
|------|-------------|--------|
| `super_admin` | Platform administrator | Full access to all farms & applications |
| `admin` | Limited admin | Specific admin functions |
| `user` | Regular user | Own farms only |

### Tenant (Farm) Roles

| Role | Description | Permissions |
|------|-------------|-------------|
| `farm_owner` | Farm owner | Full access to farm |
| `farm_manager` | Manager | Most operations except billing |
| `veterinarian` | Vet | Health records, breeding |
| `milking_staff` | Staff | Milk logs only |
| `accountant` | Finance | Expenses, sales, reports |
| `guest` | Read-only | View only |

---

## 5. Complete User Journey Flow

### Phase 1: Authentication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AUTHENTICATION FLOW                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  User visits maliktechdairy.com                                             â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Is User Authenticated?                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                   â”‚
â”‚    NO   â”‚   YES                                                             â”‚
â”‚         â”‚    â”‚                                                              â”‚
â”‚         â–¼    â”‚                                                              â”‚
â”‚  /sign-up    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  or          â”‚     â”‚  Has Active Organization (Farm)?              â”‚       â”‚
â”‚  /sign-in    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚          â”‚                                                        â”‚
â”‚         â”‚     NO   â”‚   YES                                                  â”‚
â”‚         â”‚          â”‚    â”‚                                                   â”‚
â”‚         â–¼          â–¼    â–¼                                                   â”‚
â”‚  Clerk Auth   /select-farm   /dashboard                                     â”‚
â”‚         â”‚          â”‚              â”‚                                         â”‚
â”‚         â–¼          â–¼              â–¼                                         â”‚
â”‚  Create platform_users record   Show farms or   Farm Dashboard              â”‚
â”‚         â”‚                       redirect to                                 â”‚
â”‚         â–¼                       /apply                                      â”‚
â”‚  Check if has farms                                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: Farm Application

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FARM APPLICATION FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  User visits /apply                                                         â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GET /api/user/farms - Check existing applications                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â”œâ”€â”€ Has approved farm? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Redirect to /select-farm       â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â”œâ”€â”€ Has pending application? â”€â”€â”€â”€â”€â–¶ Show Application Status        â”‚
â”‚         â”‚                                    â”œâ”€â”€ Farm Name                  â”‚
â”‚         â”‚                                    â”œâ”€â”€ Status Badge               â”‚
â”‚         â”‚                                    â””â”€â”€ "Wait for approval"        â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â””â”€â”€ No application? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Show Application Form          â”‚
â”‚                                                                             â”‚
â”‚  APPLICATION FORM (Multi-Step)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 1: Farm Details                                                â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Farm Name *                                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Owner Name * (auto-filled from Clerk)                           â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Email * (auto-filled from Clerk)                                â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Phone *                                                         â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Address                                                         â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ City                                                            â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Province (dropdown)                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 2: Animal Details                                              â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Animal Types * (multi-select: cow, buffalo, goat, etc.)         â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Estimated Animals *                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 3: Select Plan                                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Free (0 PKR) - 5 animals, 1 user                                â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Professional (4,999 PKR/mo) - 100 animals, 5 users              â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Farm (12,999 PKR/mo) - 500 animals, 15 users                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Enterprise (Custom) - Unlimited                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 4: Payment (Only for Paid Plans)                               â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Bank Transfer Details (Meezan Bank)                             â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ JazzCash Details                                                â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Upload Payment Slip (Cloudinary)                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  On Submit:                                                                 â”‚
â”‚  POST /api/farm-applications                                                â”‚
â”‚  â”œâ”€â”€ Create farm_applications record                                       â”‚
â”‚  â”œâ”€â”€ Status = 'pending' (free) or 'payment_uploaded' (paid)                â”‚
â”‚  â””â”€â”€ Show success message with application status                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 3: Super Admin Review

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SUPER ADMIN REVIEW FLOW                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Super Admin visits /super-admin/applications                               â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  GET /api/admin/applications                                         â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Returns all applications with filters                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Applications Dashboard                                              â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Search: Farm name, owner, email, phone                          â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Filter: All, Pending, Payment Uploaded, Approved, Rejected      â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Results count: "Showing X of Y applications"                    â”‚   â”‚
â”‚  â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  â”‚  MOBILE VIEW (Cards):                                             â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Green Valley Farm           [â— Payment Uploaded]          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Malik Kashif                                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ FARM-N669KHLF                                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Email: kaash0542@gmail.com  Phone: 03038111297            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Plan: Free                  Date: Dec 4, 2025             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ [View Payment Slip]                                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ [âœ“ Approve]  [âœ— Reject]                                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  â”‚  DESKTOP VIEW (Table):                                            â”‚   â”‚
â”‚  â”‚  â”‚  | Farm | Owner | Contact | Plan | Status | Payment | Actions |   â”‚   â”‚
â”‚  â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  APPROVAL ACTION:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  POST /api/admin/applications/{id}/review                            â”‚   â”‚
â”‚  â”‚  Body: { action: 'approve', reviewNotes: '...' }                     â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  APPROVAL PROCESS:                                                   â”‚   â”‚
â”‚  â”‚  1. Generate Farm ID: FARM-XXXXXXXX                                  â”‚   â”‚
â”‚  â”‚  2. Create Clerk Organization (with retry logic)                     â”‚   â”‚
â”‚  â”‚     â””â”€â”€ Try slug variations if taken                                 â”‚   â”‚
â”‚  â”‚  3. Add applicant as org:admin member                                â”‚   â”‚
â”‚  â”‚  4. Create tenant record in Supabase                                 â”‚   â”‚
â”‚  â”‚  5. Create subscription record                                       â”‚   â”‚
â”‚  â”‚  6. Create tenant_members record                                     â”‚   â”‚
â”‚  â”‚  7. Update farm_applications status = 'approved'                     â”‚   â”‚
â”‚  â”‚  8. Send approval email (Resend)                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  REJECTION ACTION:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  POST /api/admin/applications/{id}/review                            â”‚   â”‚
â”‚  â”‚  Body: { action: 'reject', rejectionReason: '...' }                  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  REJECTION PROCESS:                                                  â”‚   â”‚
â”‚  â”‚  1. Update farm_applications status = 'rejected'                     â”‚   â”‚
â”‚  â”‚  2. Set rejection_reason                                             â”‚   â”‚
â”‚  â”‚  3. Send rejection email (Resend)                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 4: User Access After Approval

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     POST-APPROVAL USER FLOW                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  User visits /apply (after approval)                                        â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  GET /api/user/farms                                                        â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â”œâ”€â”€ Returns: { hasFarms: true, farms: [...], applications: [...] } â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Application Status Page                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚         âœ“ Welcome to MTK Dairy!                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  Congratulations! Your farm has been approved.                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Farm Name    â”‚  Green Valley Farm                       â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Status       â”‚  âœ“ Approved                              â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Farm ID      â”‚  FARM-N669KHLF                           â”‚  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  [          Go to Dashboard  â†’          ]                     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  User clicks "Go to Dashboard"                                              â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  /select-farm                                                               â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Check Clerk Organization Memberships                                â”‚   â”‚
â”‚  â”‚  useOrganizationList() from @clerk/nextjs                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â”œâ”€â”€ Has Clerk Org membership? â”€â”€â”€â”€â–¶ Show farm list                 â”‚
â”‚         â”‚   User clicks farm â†’ setActive() â†’ /dashboard                    â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â””â”€â”€ No Clerk Org membership? â”€â”€â”€â”€â”€â–¶ Show "Join Farm" button        â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  POST /api/user/join-org                                                    â”‚
â”‚  â”œâ”€â”€ Find approved application                                             â”‚
â”‚  â”œâ”€â”€ Find tenant by farm_name                                              â”‚
â”‚  â”œâ”€â”€ If tenant.id starts with 'org_':                                      â”‚
â”‚  â”‚   â””â”€â”€ Add user to Clerk organization                                    â”‚
â”‚  â”œâ”€â”€ If tenant.id is fallback (tenant_xxx):                                â”‚
â”‚  â”‚   â”œâ”€â”€ Create new Clerk organization                                     â”‚
â”‚  â”‚   â”œâ”€â”€ Update tenant.id to new org_xxx                                   â”‚
â”‚  â”‚   â”œâ”€â”€ Update subscriptions.tenant_id                                    â”‚
â”‚  â”‚   â”œâ”€â”€ Update tenant_members.tenant_id                                   â”‚
â”‚  â”‚   â””â”€â”€ Add user to Clerk organization                                    â”‚
â”‚  â””â”€â”€ Refresh page â†’ User sees farm â†’ Clicks â†’ Dashboard                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 5: Farm Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FARM DASHBOARD FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  /dashboard (requires orgId in Clerk session)                               â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  Dashboard Layout checks:                                                   â”‚
â”‚  â”œâ”€â”€ userId? â†’ No â†’ /sign-in                                                â”‚
â”‚  â””â”€â”€ orgId? â†’ No â†’ /select-farm                                             â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Farm Dashboard                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  ğŸ“Š Quick Stats                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ Total Animals: 45                                        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ Today's Milk: 320 liters                                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ Eggs Collected: 150                                      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€ Health Alerts: 2                                         â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Navigation:                                                         â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /dashboard/animals   - Animal management                        â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /dashboard/milk      - Milk logging                             â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /dashboard/health    - Health records                           â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /dashboard/breeding  - Breeding management                      â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /dashboard/finance   - Expenses & sales                         â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /dashboard/analytics - Reports & insights                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ /dashboard/staff     - Staff management                         â”‚   â”‚
â”‚  â”‚  â””â”€â”€ /dashboard/settings  - Farm settings                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  API ROUTES (all require orgId header):                                     â”‚
â”‚  â”œâ”€â”€ GET/POST /api/animals                                                  â”‚
â”‚  â”œâ”€â”€ GET/POST /api/milk                                                     â”‚
â”‚  â”œâ”€â”€ GET/POST /api/health/records                                           â”‚
â”‚  â”œâ”€â”€ GET/POST /api/breeding                                                 â”‚
â”‚  â”œâ”€â”€ GET/POST /api/expenses                                                 â”‚
â”‚  â”œâ”€â”€ GET/POST /api/sales                                                    â”‚
â”‚  â””â”€â”€ GET /api/analytics                                                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. API Routes Reference

### Authentication & User Routes

| Method | Route | Description |
|--------|-------|-------------|
| GET | `/api/user/farms` | Get user's farms and applications |
| POST | `/api/user/join-org` | Join user to their approved organization |

### Farm Application Routes

| Method | Route | Description |
|--------|-------|-------------|
| POST | `/api/farm-applications` | Submit new application |
| GET | `/api/farm-applications` | List user's applications |
| GET | `/api/farm-applications/{id}` | Get application details |
| PATCH | `/api/farm-applications/{id}` | Upload payment slip |

### Super Admin Routes

| Method | Route | Description |
|--------|-------|-------------|
| GET | `/api/admin/applications` | List all applications |
| POST | `/api/admin/applications/{id}/review` | Approve/reject application |
| GET | `/api/admin/stats` | Dashboard statistics |
| GET | `/api/admin/tenants` | List all tenants |
| GET | `/api/admin/users` | List all users |

### Tenant (Farm) Routes

| Method | Route | Description |
|--------|-------|-------------|
| GET/POST | `/api/animals` | Animal CRUD |
| GET/POST | `/api/milk` | Milk log CRUD |
| GET/POST | `/api/health/records` | Health records |
| GET/POST | `/api/breeding` | Breeding records |
| GET/POST | `/api/expenses` | Expense tracking |
| GET/POST | `/api/sales` | Sales tracking |
| GET | `/api/analytics` | Farm analytics |

---

## 7. Real-World Example Walkthrough

### User: kaash0542@gmail.com â†’ Green Valley Farm

#### Step 1: Sign Up (December 4, 2025)

```javascript
// User signs up via Clerk
{
  userId: "user_2qXXXXXXXXXX",
  email: "kaash0542@gmail.com",
  name: "Malik Kashif"
}

// Clerk webhook creates platform_users record
INSERT INTO platform_users (id, email, name, platform_role) 
VALUES ('user_2qXXXX', 'kaash0542@gmail.com', 'Malik Kashif', 'user');
```

#### Step 2: Apply for Farm (December 4, 2025)

```javascript
// POST /api/farm-applications
{
  farmName: "Green Valley Farm",
  ownerName: "Malik Kashif",
  email: "kaash0542@gmail.com",
  phone: "03038111297",
  city: "Lahore",
  province: "Punjab",
  animalTypes: ["cow", "buffalo"],
  estimatedAnimals: 25,
  requestedPlan: "free"
}

// Creates farm_applications record
INSERT INTO farm_applications (
  id, applicant_id, farm_name, status, requested_plan
) VALUES (
  'app_xxx', 'user_2qXXXX', 'Green Valley Farm', 'pending', 'free'
);
```

#### Step 3: Super Admin Approval (December 4, 2025)

```javascript
// POST /api/admin/applications/app_xxx/review
{
  action: "approve",
  reviewNotes: "Verified application"
}

// APPROVAL PROCESS:
// 1. Generate Farm ID
farmId = "FARM-N669KHLF"

// 2. Create Clerk Organization
clerkOrg = await clerk.organizations.createOrganization({
  name: "Green Valley Farm",
  slug: "green-valley-farm"
});
// clerkOrg.id = "org_2qYYYYYYYYYY"

// 3. Add applicant as admin
await clerk.organizations.createOrganizationMembership({
  organizationId: "org_2qYYYYYYYYYY",
  userId: "user_2qXXXX",
  role: "org:admin"
});

// 4. Create tenant
INSERT INTO tenants (id, slug, farm_name) VALUES (
  'org_2qYYYYYYYYYY', 'green-valley-farm', 'Green Valley Farm'
);

// 5. Create subscription
INSERT INTO subscriptions (id, tenant_id, plan, status) VALUES (
  'sub_xxx', 'org_2qYYYYYYYYYY', 'free', 'active'
);

// 6. Create tenant_members
INSERT INTO tenant_members (tenant_id, user_id, role, status) VALUES (
  'org_2qYYYYYYYYYY', 'user_2qXXXX', 'farm_owner', 'active'
);

// 7. Update application
UPDATE farm_applications SET 
  status = 'approved',
  assigned_farm_id = 'FARM-N669KHLF',
  assigned_tenant_id = 'org_2qYYYYYYYYYY',
  reviewed_at = NOW()
WHERE id = 'app_xxx';
```

#### Step 4: User Accesses Dashboard (December 5, 2025)

```javascript
// User visits /apply â†’ Sees approval status â†’ Clicks "Go to Dashboard"
// Redirects to /select-farm

// GET /api/user/farms returns:
{
  success: true,
  data: {
    hasFarms: true,
    farms: [{
      id: "org_2qYYYYYYYYYY",
      name: "Green Valley Farm",
      slug: "green-valley-farm",
      role: "farm_owner"
    }],
    applications: [{
      id: "app_xxx",
      farmName: "Green Valley Farm",
      status: "approved",
      assignedFarmId: "FARM-N669KHLF"
    }]
  }
}

// User clicks on farm â†’ Clerk setActive() â†’ Redirects to /dashboard
// Dashboard loads with farm context
```

---

## 8. Security & Best Practices

### Authentication

- âœ… All routes protected by Clerk middleware
- âœ… Organization context validated on tenant routes
- âœ… Super admin routes check platform_role

### Data Access

- âœ… Row-Level Security (RLS) on Supabase tables
- âœ… Tenant isolation via organization ID
- âœ… API routes validate orgId from Clerk session

### File Uploads

- âœ… Cloudinary for payment slips and images
- âœ… Signed URLs for secure access
- âœ… File type validation

### Error Handling

- âœ… Retry logic for Clerk operations
- âœ… Fallback mechanisms for failed operations
- âœ… Detailed error logging
- âœ… User-friendly error messages

### Best Practices

1. **Type Safety**: TypeScript + Drizzle ORM
2. **State Management**: React Query for server state
3. **Responsive Design**: Mobile-first with Tailwind
4. **Accessibility**: ARIA labels, keyboard navigation
5. **Performance**: Edge functions, caching
6. **Monitoring**: Error tracking, audit logs

---

## 9. AI Agent Rules & Memory

### Project Context

```yaml
project_name: MTK Dairy (Malik Tech Dairy)
type: Multi-Tenant SaaS Platform
domain: Dairy Farm Management
region: Pakistan
language: English + Urdu (RTL)
currency: PKR (Pakistan Rupees)
```

### Critical Rules for AI Agent

#### Database Rules

1. **Always use Supabase REST API** with type assertions for TypeScript
2. **Never use Drizzle ORM directly** in API routes - use Supabase client
3. **Tenant isolation is mandatory** - always filter by tenant_id
4. **Use `as any` type assertions** when Supabase types conflict

```typescript
// âœ… CORRECT
const { data, error } = await (supabase
  .from('tenants')
  .select('*')
  .eq('id', tenantId) as any);

// âŒ WRONG - direct Drizzle in API routes
const result = await db.select().from(tenants);
```

#### Clerk Integration Rules

1. **Organization ID = Tenant ID** in Supabase
2. **Always retry Clerk operations** with slug variations
3. **Add user to org after creating** organization
4. **Handle fallback IDs** (tenant_xxx) by creating Clerk org

```typescript
// Clerk org creation with retry
const slugVariations = [
  baseSlug,
  `${baseSlug}-${Date.now().toString(36)}`,
  `${baseSlug}-${Math.random().toString(36).slice(2, 8)}`,
];

for (const slug of slugVariations) {
  try {
    const org = await clerk.organizations.createOrganization({
      name: farmName,
      slug: slug,
    });
    // Success - add member
    await clerk.organizations.createOrganizationMembership({
      organizationId: org.id,
      userId: applicantId,
      role: 'org:admin',
    });
    break;
  } catch (error) {
    // Retry with next slug
  }
}
```

#### API Route Rules

1. **Always check auth** at the start of every route
2. **Return consistent JSON structure**: `{ success, data, error, message }`
3. **Log errors to console** with context
4. **Handle both success and error cases**

```typescript
// Standard API response format
return NextResponse.json({
  success: true,
  message: 'Operation successful',
  data: { ... }
});

return NextResponse.json(
  { success: false, error: 'Error message', details: '...' },
  { status: 400 }
);
```

#### UI/UX Rules

1. **Mobile-first responsive design** with Tailwind
2. **Use shadcn/ui components** for consistency
3. **Show loading states** for async operations
4. **Display toast notifications** for user feedback
5. **Use Lucide icons** for iconography

```typescript
// Mobile + Desktop responsive
<div className="lg:hidden">
  {/* Mobile card view */}
</div>
<div className="hidden lg:block">
  {/* Desktop table view */}
</div>
```

#### File Structure Rules

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (auth)/          # Clerk auth pages
â”‚   â”œâ”€â”€ (dashboard)/     # Tenant dashboard (requires orgId)
â”‚   â”œâ”€â”€ (onboarding)/    # Onboarding & farm selection
â”‚   â”œâ”€â”€ (public)/        # Public pages (apply, etc.)
â”‚   â”œâ”€â”€ (super-admin)/   # Super admin dashboard
â”‚   â””â”€â”€ api/             # API routes
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/              # shadcn/ui components
â”‚   â””â”€â”€ tenant/          # Tenant-specific components
â”œâ”€â”€ db/
â”‚   â””â”€â”€ schema.ts        # Drizzle ORM schema
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts      # Supabase client
â”‚   â””â”€â”€ utils.ts         # Utility functions
â””â”€â”€ middleware.ts        # Clerk middleware
```

### Memory for Future Sessions

```yaml
key_decisions:
  - Clerk Organizations used for multi-tenancy
  - Supabase PostgreSQL as primary database
  - Cloudinary for file storage
  - Free tier: 5 animals, 1 user
  - PKR currency for Pakistan market

known_issues:
  - Some tenants created with fallback IDs (tenant_xxx) need migration
  - Firebase still used for some legacy routes (migration pending)
  - Supabase types conflict with TypeScript (use `as any`)

common_fixes:
  - 404 on /login â†’ Create redirect page to /sign-in
  - "No organizations" â†’ Call /api/user/join-org to create/join
  - TypeScript errors â†’ Use `as any` type assertions
  - Search not working â†’ Check null safety in filter function

super_admin_emails:
  - kaash0542@gmail.com

test_accounts:
  - email: kaash0542@gmail.com
    farm: Green Valley Farm
    farmId: FARM-N669KHLF
    role: farm_owner
```

---

## Quick Reference Card

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MTK DAIRY QUICK REFERENCE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  USER FLOW:                                                                 â”‚
â”‚  /sign-up â†’ /apply â†’ [Wait for Approval] â†’ /select-farm â†’ /dashboard       â”‚
â”‚                                                                             â”‚
â”‚  ADMIN FLOW:                                                                â”‚
â”‚  /super-admin/applications â†’ Review â†’ Approve/Reject                        â”‚
â”‚                                                                             â”‚
â”‚  KEY PAGES:                                                                 â”‚
â”‚  /sign-up, /sign-in    Authentication (Clerk)                               â”‚
â”‚  /apply                 Farm application form                               â”‚
â”‚  /select-farm           Farm selection (post-approval)                      â”‚
â”‚  /dashboard             Farm dashboard (requires org)                       â”‚
â”‚  /super-admin           Admin dashboard                                     â”‚
â”‚                                                                             â”‚
â”‚  KEY APIs:                                                                  â”‚
â”‚  /api/user/farms        Get user's farms                                    â”‚
â”‚  /api/user/join-org     Join Clerk organization                             â”‚
â”‚  /api/farm-applications Farm application CRUD                               â”‚
â”‚  /api/admin/applications/{id}/review  Approve/reject                        â”‚
â”‚                                                                             â”‚
â”‚  DATABASE:                                                                  â”‚
â”‚  Supabase Project: gdditqkvzlpnklcoxspj (ap-south-1)                        â”‚
â”‚                                                                             â”‚
â”‚  STORAGE:                                                                   â”‚
â”‚  Cloudinary: dujpst04m                                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Document Version**: 1.0.0  
**Last Updated**: December 5, 2024  
**Author**: AI Agent (Cascade)  
**Project**: MTK Dairy - Malik Tech Dairy Farm SaaS
